spring:
  datasource:
    url: ${NAIS_DATABASE_DB_JDBC_URL:${DB_JDBC_URL:}}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 5000
      max-lifetime: 1200000
      idle-timeout: 600000
      connection-test-query: SELECT 1
      maximum-pool-size: ${DB_POOLSIZE:5}

  jpa:
    hibernate:
      ddl-auto: validate
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    properties:
      hibernate:
        default_schema: public
        jdbc.time_zone: UTC
        format_sql: false
        jdbc.batch_size: 25

management:
  endpoint.health.show-details: always
  endpoints:
    web:
      base-path: /internal/actuator
      exposure.include: info,health,metrics,prometheus
#---
## Local overrides: run with -Dspring.profiles.active=local
#spring:
#  config:
#    activate:
#      on-profile: local
#  datasource:
#    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_DATABASE:strim}
#    username: ${DB_USERNAME:strim}
#    password: ${DB_PASSWORD:changeme}
#    driver-class-name: org.postgresql.Driver
#  jpa:
#    hibernate:
#      ddl-auto: update